# üéô OpenAI Whisper Usage

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
![Python Version](https://img.shields.io/badge/Python-3.8%2B-green)
![Whisper Version](https://img.shields.io/badge/Whisper-large--v3-important)

–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π –∞—É–¥–∏–æ-—Ç—Ä–∞–Ω—Å–∫—Ä–∞–π–±–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 99 —è–∑—ã–∫–æ–≤. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SRT/—Ç–µ–∫—Å—Ç–∞ —Å GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ–º, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —à—É–º–æ–≤ –∏ —Ç–æ—á–Ω—ã–º –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫.


## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤**: WAV, MP3, FLAC, MP4 –∏ –¥—Ä—É–≥–∏–µ (—á–µ—Ä–µ–∑ FFmpeg)
- **–†–µ–∂–∏–º—ã –≤—ã–≤–æ–¥–∞**: –°—É–±—Ç–∏—Ç—Ä—ã SRT / –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç / –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π JSON
- **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å**: –†—É—Å—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –∫–∏—Ç–∞–π—Å–∫–∏–π, –∏—Å–ø–∞–Ω—Å–∫–∏–π –∏ 95 –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: 
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ç–∏—à–∏–Ω—ã (VAD)
  - –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ (batch processing)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CPU/CUDA
- **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è**:
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∏–ª–µ–π —Å—É–±—Ç–∏—Ç—Ä–æ–≤
  - –í—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π —Ä–∞–∑–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
  - –§–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —è–∑—ã–∫–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# –ë–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install torch>=2.1.0 whisperx>=3.0.0
```
### –ü—Ä–æ–≤–µ—Ä–∫–∞ FFmpeg (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è MP3/MP4)
```bash
ffmpeg -version || sudo apt install ffmpeg  # –î–ª—è Ubuntu/Debian
```
## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞

- --output	    subtitles.srt	–ü—É—Ç—å –¥–ª—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

- --text-only	    False	        –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

- --device	    cuda	        –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (cpu/cuda)

- --lang	        auto	        –Ø–∑—ã–∫ –∞—É–¥–∏–æ (ru/en/es/fr/zh –∏ –¥—Ä.)

- --model	        large-v3	    –ú–æ–¥–µ–ª—å Whisper (tiny/small/medium/large-v3)

- --vad-filter    True	        –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–æ–Ω–æ–≤–æ–≥–æ —à—É–º–∞

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

- ru	–†—É—Å—Å–∫–∏–π	

- en	–ê–Ω–≥–ª–∏–π—Å–∫–∏–π

- es	–ò—Å–ø–∞–Ω—Å–∫–∏–π	

- fr	–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π

- de	–ù–µ–º–µ—Ü–∫–∏–π	

- zh	–ö–∏—Ç–∞–π—Å–∫–∏–π

- ja	–Ø–ø–æ–Ω—Å–∫–∏–π	

- ko	–ö–æ—Ä–µ–π—Å–∫–∏–π

- ar	–ê—Ä–∞–±—Å–∫–∏–π	

- hi	–•–∏–Ω–¥–∏

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —è–∑—ã–∫–æ–≤:
https://github.com/openai/whisper/blob/main/whisper/tokenizer.py

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞)
python transcribe.py input.wav
```
### –°–æ–∑–¥–∞–Ω–∏–µ —Ä—É—Å—Å–∫–∏—Ö —Å—É–±—Ç–∏—Ç—Ä–æ–≤:
```bash
python transcribe.py lecture.wav --lang ru
```
### –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –¥–ª—è –≤–∏–¥–µ–æ:
```bash
python transcribe.py presentation.mp4 --lang en --output en_subtitles.srt
```
### –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–π —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏:
```bash
python transcribe.py podcast.mp3 --text-only -o transcript.txt
```
### –ë—ã—Å—Ç—Ä–∞—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–≤—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º: 
```bash
python transcribe.py interview.wav --text-only --device cuda -o interview_ru.txt
```
### –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ GPU:
```bash
python transcribe.py video.mp4 --device cuda --lang ru
```
### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –Ω–∞ CPU:
```bash
python transcribe.py podcast.flac --device cpu --lang en --output episode_42.txt
```
### –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:
### –ò—Å–ø–∞–Ω—Å–∫–∏–π
```bash
python transcribe.py audio_es.mp3 --lang es
```
### –ö–∏—Ç–∞–π—Å–∫–∏–π (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π):
```bash
python transcribe.py meeting_record.wav --lang zh
```
### –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—á–µ—Ä–µ–∑ shell):
```bash
# –î–ª—è –≤—Å–µ—Ö WAV-—Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ
for file in *.wav; do
    python transcribe.py "$file" --output "${file%.*}.srt"
done
```
###  –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –∑–≤—É–∫–∞:
# –° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —à—É–º–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```bash
python transcribe.py noisy_audio.wav --output cleaned_subtitles.srt
```
### –ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–¥–ª—è —á–∏—Å—Ç—ã—Ö –∑–∞–ø–∏—Å–µ–π)
```bash
python transcribe.py studio_recording.wav --vad-filter False
```

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω—å—à–µ–π –º–æ–¥–µ–ª–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
```bash
python transcribe.py long_audio.ogg --model medium --device cuda
```
### –§–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —è–∑—ã–∫–∞ –¥–ª—è —Å–º–µ—à–∞–Ω–Ω–æ–π —Ä–µ—á–∏
```bash
python transcribe.py bilingual.wav --lang ru --task translate
```
## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –î–ª—è MP3/MP4 —Ç—Ä–µ–±—É–µ—Ç—Å—è FFmpeg (sudo apt install ffmpeg –Ω–∞ Ubuntu, sudo pacman -S ffmpeg –Ω–∞ Arch Linux)

- –ú–æ–¥–µ–ª—å large-v3 —Ç—Ä–µ–±—É–µ—Ç 10+ GB VRAM –Ω–∞ GPU

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --device cpu –µ—Å–ª–∏ –Ω–µ—Ç NVIDIA GPU

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:

- CPU: x86-64 —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π AVX2

- RAM: 8 GB

- –î–∏—Å–∫: 5 GB

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:

- GPU: NVIDIA —Å 8+ GB VRAM (RTX 3080+)

- RAM: 16+ GB

- –î–∏—Å–∫: 20 GB (–¥–ª—è –º–æ–¥–µ–ª–µ–π large-v3)

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:
### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ CUDA –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ

### –†–µ—à–µ–Ω–∏–µ:
```bash
pip uninstall torch && pip install torch torchaudio --extra-index-url https://download.pytorch.org/whl/cu118
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ CPU

### –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω—å—à–∏–µ –º–æ–¥–µ–ª–∏
```bash
python transcribe.py audio.wav --model small
```
## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License - –ü–æ–¥—Ä–æ–±–Ω–µ–µ

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –î–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π Whisper –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è OpenAI
